# Maintainer: Guten Ye

pkgname="freedom-routes"
pkgver=1.0.0
pkgrel=3
pkgdesc="Internet Freedom - add local routes in vpn for accessing local websites using direct link"
arch=("any")
url="https://github.com/GutenYe/freedom-routes"
license=("MIT")
depends=("iproute2")
makedepends=("git" "go")
source=()
source=( 
  "$pkgname-$pkgver.tar.gz::https://github.com/GutenYe/freedom-routes/archive/v$pkgver.tar.gz"
)
backup=("etc/freedom-routes")

build() {
  # prepare dependency
  export GOPATH="$srcdir/go"
  go get github.com/GutenYe/freedom-routes

  cd "$srcdir/$pkgname-$pkgver"
  ./build.sh -d /usr/share/freedom-routes
}

package() {
  cd "$srcdir/$pkgname-$pkgver/dist"

  mkdir -p "$pkgdir/usr/bin"
  mkdir -p "$pkgdir/etc"
  mkdir -p "$pkgdir/usr/share/freedom-routes"
  cp freedom-routes "$pkgdir/usr/bin"
  cp freedom-routes.etc "$pkgdir/etc/freedom-routes"
  cp -r templates "$pkgdir/usr/share/freedom-routes"
}

# vim:set ts=2 sw=2 et:
md5sums=('090415b9ac9ba8426f903dd6dfef2dee')
